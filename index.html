<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° YouTube Downloader | Fast & Easy</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tailwind Configuration and Font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* Dark background */
            color: #c9d1d9; /* Light text */
        }
        /* Custom loading spinner styles */
        .spinner {
            border-top-color: #3b82f6;
            -webkit-animation: spinner 1s linear infinite;
            animation: spinner 1s linear infinite;
        }
        @-webkit-keyframes spinner {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }
        @keyframes spinner {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen p-4 sm:p-8">

    <div class="max-w-4xl mx-auto">
        
        <!-- Header -->
        <header class="text-center mb-10 p-4 border-b border-gray-700">
            <h1 class="text-4xl font-extrabold text-white mb-2">‚ö° SuperFast Video Downloader</h1>
            <p class="text-lg text-gray-400">YouTube link daalein aur apni pasand ki quality mein video download karein free me without ads.</p>
        </header>

        <!-- Input Area -->
        <div class="bg-[#161b22] p-6 rounded-xl shadow-2xl mb-8 border border-gray-700">
            <div class="flex flex-col sm:flex-row gap-4">
                <input
                    type="url"
                    id="videoUrl"
                    placeholder="Yahaan YouTube Link Paste Karein (e.g., https://youtu.be/dQw4w9WgXcQ)"
                    class="flex-grow p-3 rounded-lg bg-[#0d1117] border border-gray-600 focus:ring-blue-500 focus:border-blue-500 text-white placeholder-gray-500 transition duration-300"
                    required
                />
                <button
                    id="fetchBtn"
                    onclick="fetchVideoDetails()"
                    class="w-full sm:w-auto px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-lg hover:bg-blue-700 transition duration-300 transform hover:scale-[1.02] active:scale-[0.98]"
                >
                    Details Lao
                </button>
            </div>
            <p id="apiEndpointText" class="mt-4 text-xs text-gray-500 text-center">
                before downloading high quality videos please check the video are mute or not because some video are without audio
            </p>
        </div>

        <!-- Loading & Message Area -->
        <div id="messageArea" class="text-center mb-8 p-4 rounded-lg hidden">
            <!-- Messages (loading, error) will be displayed here -->
        </div>

        <!-- Video Result Card Area (Initially Hidden) -->
        <div id="resultCard" class="bg-[#161b22] p-4 sm:p-6 rounded-xl shadow-2xl border border-gray-700 hidden">
            <div class="flex flex-col md:flex-row gap-6">
                
                <!-- Thumbnail and Details -->
                <div class="md:w-1/3">
                    <img id="thumbnail" src="" alt="Video Thumbnail" class="w-full h-auto object-cover rounded-lg shadow-md border border-gray-600 aspect-video" onerror="this.onerror=null; this.src='https://placehold.co/400x225/374151/ffffff?text=Video+Not+Found'" />
                    <div class="mt-4 p-3 bg-[#0d1117] rounded-lg">
                        <h2 id="videoTitle" class="text-xl font-bold text-white mb-1 leading-snug"></h2>
                        <div class="flex justify-between text-sm text-gray-400 mt-2">
                            <span id="videoDuration" class="flex items-center">
                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span class="duration-text"></span>
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Download Qualities List -->
                <div class="md:w-2/3">
                    <h3 class="text-2xl font-semibold mb-4 text-blue-400 border-b border-gray-700 pb-2">Download Qualities</h3>
                    <div id="qualitiesList" class="space-y-3">
                        <!-- Quality buttons will be inserted here -->
                    </div>
                    <div id="noQualitiesMessage" class="hidden text-red-400 mt-4 p-3 bg-red-900/20 rounded-lg border border-red-800">
                        <p>üö´ Khel ho gaya! Download links nahi mile. Ho sakta hai video private ho ya Server fail ho gaya ho.</p>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <script>
        // API endpoint jise aapne provide kiya hai
        const DOWNLOAD_API_BASE = "https://you-tube-video-downloader-sooty.vercel.app/download?url=";

        const videoUrlInput = document.getElementById('videoUrl');
        const fetchBtn = document.getElementById('fetchBtn');
        const messageArea = document.getElementById('messageArea');
        const resultCard = document.getElementById('resultCard');
        const qualitiesList = document.getElementById('qualitiesList');
        const videoTitle = document.getElementById('videoTitle');
        const thumbnail = document.getElementById('thumbnail');
        const videoDuration = document.querySelector('.duration-text');
        const noQualitiesMessage = document.getElementById('noQualitiesMessage');

        // Function to show messages (loading, error, info)
        function showMessage(type, message, isHtml = false) {
            messageArea.classList.remove('hidden', 'bg-red-900/20', 'bg-yellow-900/20', 'bg-green-900/20');
            messageArea.classList.add('p-4', 'mt-4');
            
            // Set colors based on type
            if (type === 'loading') {
                messageArea.innerHTML = `
                    <div class="flex justify-center items-center space-x-2 text-blue-400">
                        <div class="spinner border-4 border-t-4 border-gray-500 h-6 w-6 rounded-full"></div>
                        <span>${message}</span>
                    </div>
                `;
            } else if (type === 'error') {
                messageArea.classList.add('bg-red-900/20', 'text-red-400', 'border', 'border-red-700');
                messageArea.innerHTML = `<p class="font-bold">‚ùå Error:</p><p>${message}</p>`;
            } else if (type === 'success') {
                messageArea.classList.add('bg-green-900/20', 'text-green-400', 'border', 'border-green-700');
                messageArea.innerHTML = `<p class="font-bold">‚úÖ Success!</p><p>${message}</p>`;
            } else { // info
                messageArea.classList.add('bg-yellow-900/20', 'text-yellow-400', 'border', 'border-yellow-700');
                messageArea.innerHTML = `<p class="font-bold">‚ÑπÔ∏è Information:</p><p>${message}</p>`;
            }
        }

        // Function to hide the result card and message area
        function resetUI() {
            resultCard.classList.add('hidden');
            messageArea.classList.add('hidden');
            qualitiesList.innerHTML = '';
            noQualitiesMessage.classList.add('hidden');
        }

        // Function to handle the API call
        async function fetchVideoDetails() {
            resetUI();
            const url = videoUrlInput.value.trim();

            if (!url) {
                showMessage('error', 'Kripya YouTube link daalein.');
                return;
            }

            // Show Loading Screen
            showMessage('loading', 'Video Details Fetch Kar Rahe Hain, Kripya Intezaar Karein...');
            fetchBtn.disabled = true;
            fetchBtn.classList.add('opacity-50');

            // Construct the full API URL
            const apiUrl = `${DOWNLOAD_API_BASE}${encodeURIComponent(url)}`;

            try {
                const response = await fetch(apiUrl);

                if (!response.ok) {
                    throw new Error(`API Response: ${response.status} ${response.statusText}`);
                }

                const data = await response.json();

                if (data.status_code !== 200 || !data.title || !data.qualities || data.qualities.length === 0) {
                    showMessage('error', 'Video details fetch karne mein dikkat aayi. Ho sakta hai link invalid ho ya server mein koi problem ho.');
                    console.error("API response data:", data);
                    return;
                }

                // --- Display Results ---
                messageArea.classList.add('hidden'); // Hide loading message
                resultCard.classList.remove('hidden');

                // 1. Display Basic Details
                videoTitle.textContent = data.title;
                thumbnail.src = data.thumbnail || 'https://placehold.co/400x225/374151/ffffff?text=No+Thumbnail';
                videoDuration.textContent = data.duration || 'N/A';
                
                // 2. Display Qualities
                if (data.qualities.length > 0) {
                    qualitiesList.innerHTML = ''; // Clear previous list
                    data.qualities.forEach(quality => {
                        const qualityItem = document.createElement('div');
                        qualityItem.className = 'flex justify-between items-center bg-[#0d1117] p-3 rounded-lg border border-gray-700 hover:bg-gray-800 transition duration-200';
                        
                        // Quality Text
                        const qualityText = document.createElement('span');
                        qualityText.className = 'text-gray-300 font-medium';
                        qualityText.textContent = quality.quality;

                        // Download Button (Direct link)
                        const downloadLink = document.createElement('a');
                        downloadLink.href = quality.url;
                        downloadLink.target = "_blank"; // Open in new tab
                        downloadLink.download = `${data.title} - ${quality.quality}`; // Suggest a file name
                        downloadLink.className = 'px-4 py-1.5 bg-green-600 text-white font-semibold text-sm rounded-full shadow-md hover:bg-green-700 transition duration-200 transform hover:scale-105';
                        downloadLink.textContent = 'Download';

                        qualityItem.appendChild(qualityText);
                        qualityItem.appendChild(downloadLink);
                        qualitiesList.appendChild(qualityItem);
                    });
                    noQualitiesMessage.classList.add('hidden');
                } else {
                    noQualitiesMessage.classList.remove('hidden');
                }

            } catch (error) {
                console.error("Fetch Error:", error);
                showMessage('error', `Data fetch karte samay network ya server error aaya: ${error.message}. Kripya thodi der baad dobara koshish karein.`);
                resultCard.classList.add('hidden');
            } finally {
                // Remove loading state
                fetchBtn.disabled = false;
                fetchBtn.classList.remove('opacity-50');
            }
        }
    </script>

</body>
</html>

